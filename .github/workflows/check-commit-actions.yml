name: check-commit
on:
  push:
    branches:
      - main
    paths-ignore:
      - 'README.md'
      - 'LICENSE'
  pull_request:
    branches:
      - main
    paths-ignore:
      - 'README.md'
      - 'LICENSE'
jobs:
  run-pytest:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
      - run: bash miniconda.sh -b -p $HOME/miniconda;
      - run: export PATH="$HOME/miniconda/bin:$HOME/miniconda/lib:$PATH";
      - run: conda config --set always_yes yes --set changeps1 no;
      - run: source ~/miniconda/bin/activate base
      - run: conda install -c conda-forge -c defaults -c cadquery python=3.8 mypy
      - run: conda install pytest
      - run: pytest -v